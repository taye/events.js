var events=function(){function i(e,a,f,d){var b,c=g[h.indexOf(e)];if(c&&c.events)if("all"===a)for(a in c.events)c.events.hasOwnProperty(a)&&i(e,a,"all");else{if(c.events[a]){var j=c.events[a].length;if("all"===f){for(b=0;b<j;b++)e[k](a,c.events[a][b],d||!1);c.events[a]=null;c.typeCount--}else for(b=0;b<j;b++)if(c.events[a][b]===f){e[k](a,c.events[a][b],d||!1);c.events[a].splice(b,1);break}c.events[a]&&0===c.events[a].length&&(c.events[a]=null,c.typeCount--)}c.typeCount||(g.splice(g.indexOf(c),1),
h.splice(h.indexOf(e),1))}}var l="addEventListener"in document?"addEventListener":"attachEvent",k="removeEventListener"in document?"removeEventListener":"detachEvent",h=[],g=[];"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,a){var f=this.length>>>0,d=Number(a)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=f);d<f;d++)if(d in this&&this[d]===e)return d;return-1});return{add:function(e,a,f,d){if(e instanceof window.Element||e===window.document){var b=g[h.indexOf(e)];b||(b={events:{},
typeCount:0},h.push(e),g.push(b));b.events[a]||(b.events[a]=[],b.typeCount++);if(-1===b.events[a].indexOf(f))return b.events[a].push(f),e[l](a,f,d||!1)}},remove:i}}();
