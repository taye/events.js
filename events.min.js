var events=function(){"use strict";function e(e,t,a,d){var f=n(l,e),m=c[f];if(m||(m={events:{},typeCount:0},f=l.push(e)-1,c.push(m),v.push(u?{supplied:[],wrapped:[],useCount:[]}:null)),m.events[t]||(m.events[t]=[],m.typeCount++),-1===n(m.events[t],a)){var h;if(u){var g=v[f],w=n(g.supplied,a),C=g.wrapped[w]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,t.preventDefault=t.preventDefault||s,t.stopPropagation=t.stopPropagation||o,t.stopImmediatePropagation=t.stopImmediatePropagation||p,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),t.pageY=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)),a(t))};h=e[i](r+t,C,Boolean(d)),-1===w?(g.supplied.push(a),g.wrapped.push(C),g.useCount.push(1)):g.useCount[w]++}else h=e[i](t,a,d||!1);return m.events[t].push(a),h}}function t(e,s,o,p){var i,d,f,m=n(l,e),h=c[m],g=o;if(h&&h.events)if(u&&(d=v[m],f=n(d.supplied,o),g=d.wrapped[f]),"all"!==s){if(h.events[s]){var w=h.events[s].length;if("all"===o)for(i=0;w>i;i++)t(e,s,h.events[s][i],Boolean(p));else for(i=0;w>i;i++)if(h.events[s][i]===o){e[a](r+s,g,p||!1),h.events[s].splice(i,1),u&&d&&(d.useCount[f]--,0===d.useCount[f]&&(d.supplied.splice(f,1),d.wrapped.splice(f,1),d.useCount.splice(f,1)));break}h.events[s]&&0===h.events[s].length&&(h.events[s]=null,h.typeCount--)}h.typeCount||(c.splice(m),l.splice(m),v.splice(m))}else for(s in h.events)h.events.hasOwnProperty(s)&&t(e,s,"all")}function n(e,t){for(var n=0,s=e.length;s>n;n++)if(e[n]===t)return n;return-1}function s(){this.returnValue=!1}function o(){this.cancelBubble=!0}function p(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var u="attachEvent"in window&&!("addEventListener"in window),i=u?"attachEvent":"addEventListener",a=u?"detachEvent":"removeEventListener",r=u?"on":"",l=[],c=[],v=[];return{add:e,remove:t,useAttachEvent:u}}();
