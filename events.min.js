var events=function(){"use strict";function e(e,t,p,i){var l=s.indexOf(e),c=a[l];if(c||(c={events:{},typeCount:0},l=s.push(e)-1,a.push(c),u.push(n?{supplied:[],wrapped:[],useCount:[]}:null)),c.events[t]||(c.events[t]=[],c.typeCount++),-1===c.events[t].indexOf(p)){var v;if(n){var d=u[l],f=d.supplied.indexOf(p),h=d.wrapped[f]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop),p(t))};v=e[o](r+t,h,Boolean(i)),-1===f?(d.supplied.push(p),d.wrapped.push(h),d.useCount.push(1)):d.useCount[f]++}else v=e[o](t,p,i||!1);return c.events[t].push(p),v}}function t(e,o,i,l){var c,v,d,f=s.indexOf(e),h=a[f],y=i;if(h&&h.events)if(n&&(v=u[f],d=v.supplied.indexOf(i),y=v.wrapped[d]),"all"!==o){if(h.events[o]){var m=h.events[o].length;if("all"===i)for(c=0;m>c;c++)t(e,o,h.events[o][c],Boolean(l));else for(c=0;m>c;c++)if(h.events[o][c]===i){e[p](r+o,y,l||!1),h.events[o].splice(c,1),n&&v&&(v.useCount[d]--,0===v.useCount[d]&&(v.supplied.splice(d,1),v.wrapped.splice(d,1),v.useCount.splice(d,1)));break}h.events[o]&&0===h.events[o].length&&(h.events[o]=null,h.typeCount--)}h.typeCount||(a.splice(f),s.splice(f),u.splice(f))}else for(o in h.events)h.events.hasOwnProperty(o)&&t(e,o,"all")}var n="attachEvent"in window&&!("addEventListener"in window),o=n?"attachEvent":"addEventListener",p=n?"detachEvent":"removeEventListener",r=n?"on":"",i=window.Event||Object,s=[],a=[],u=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in i.prototype||(i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in i.prototype||(i.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in i.prototype||(i.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:e,remove:t,useAttachEvent:n}}();